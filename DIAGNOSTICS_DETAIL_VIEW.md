# üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: –ü–æ—á–µ–º—É –∞–Ω–∞–ª–∏–∑ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ üëÅÔ∏è

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ üëÅÔ∏è "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ **"üìÑ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞"** (JSON), –∞ –Ω–µ –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –æ—Ç –ì–∞–ª–∏–Ω—ã.

## –ì–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞

### 1Ô∏è‚É£ –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
**–§–∞–π–ª:** `src/pages/DocumentsAnalysis.js`  
**–§—É–Ω–∫—Ü–∏—è:** `loadFullDocumentAnalysis`  
**–°—Ç—Ä–æ–∫–∞:** 174-179

```javascript
const handleViewDocument = async (document) => {
  const fullDocument = await loadFullDocumentAnalysis(document.id, document);
  setSelectedDocument(fullDocument);  // ‚Üê –î–æ–∫—É–º–µ–Ω—Ç —Å –∞–Ω–∞–ª–∏–∑–æ–º
  setViewMode('detail');
};
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞
- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å `document.analysis` —Å —Ä–∏—Å–∫ –ø—É–Ω–∫—Ç–∞–º–∏

### 2Ô∏è‚É£ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞
**–§–∞–π–ª:** `src/components/DocumentDetailView.js`  
**–°—Ç—Ä–æ–∫–∞:** 328

```javascript
{document.analysis && (  // ‚Üê –≠–¢–û–¢ –ï–°–õ–ò –î–û–õ–ñ–ï–ù –ë–´–¢–¨ TRUE!
  <div className="llm-analysis-container">
    {/* –ê–Ω–∞–ª–∏–∑ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∑–¥–µ—Å—å */}
  </div>
)}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –ï—Å–ª–∏ `document.analysis` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–Ω–∞–ª–∏–∑ ‚úÖ
- –ï—Å–ª–∏ `document.analysis === null` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ JSON ‚ùå

## üß™ –ö–∞–∫ –æ—Ç–ª–∞–¥–∏—Ç—å

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
```
F12 ‚Üí Console
```

### –®–∞–≥ 2: –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ DocumentsAnalysis.js

**–î–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å:**
```
üîç doc.analysis: {risks: [...], recommendations: [...]}
üîç doc.analysis_result: null
üîç doc.analysisResult: undefined
‚úÖ Final analysisResult: {risks: [...], recommendations: [...]}
```

### –®–∞–≥ 3: –ù–∞–∂–º–∏—Ç–µ üëÅÔ∏è –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ DocumentDetailView.js

**–î–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å:**
```
üîç DocumentDetailView received document: {id: "...", name: "...", analysis: {...}}
üîç document.analysis: {risks: [...], recommendations: [...]}
üîç document.extracted_text: "–ü–û–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï..."
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network –≤–∫–ª–∞–¥–∫—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network
2. –ù–∞–∂–º–∏—Ç–µ üëÅÔ∏è
3. –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å `GET /api/documents/{documentId}`
4. –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
```json
{
  "success": true,
  "data": {
    "analysis": {
      "risks": [...],
      "recommendations": [...]
    }
  }
}
```

## üî¥ –ï—Å–ª–∏ –∞–Ω–∞–ª–∏–∑ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: `document.analysis === null` –≤ DocumentDetailView

**–ü—Ä–∏—á–∏–Ω–∞:** –§—É–Ω–∫—Ü–∏—è `loadFullDocumentAnalysis` –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞ –∞–Ω–∞–ª–∏–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ `loadFullDocumentAnalysis` –≤ –∫–æ–Ω—Å–æ–ª–∏

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ê–Ω–∞–ª–∏–∑ –µ—Å—Ç—å, –Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ï—Å—Ç—å –ª–∏ —É –∞–Ω–∞–ª–∏–∑–∞ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è:
- `risks` (–º–∞—Å—Å–∏–≤) ‚úÖ
- `recommendations` (–º–∞—Å—Å–∏–≤) ‚úÖ
- `expertOpinion` (—Å—Ç—Ä–æ–∫–∞) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- `legalErrors` (–º–∞—Å—Å–∏–≤) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

### –í–∞—Ä–∏–∞–Ω—Ç 3: –î–∞–Ω–Ω—ã–µ –Ω–µ –¥–æ—à–ª–∏ –∏–∑ backend

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Network:**
1. –ó–∞–ø—Ä–æ—Å –∫ `/api/documents/{documentId}` –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É?
2. –ê–Ω–∞–ª–∏–∑ –≤–æ–æ–±—â–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç–µ?

## üìä –ß–µ–∫-–ª–∏—Å—Ç –æ—Ç–ª–∞–¥–∫–∏

- [ ] –ö–æ–Ω—Å–æ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `üîç DocumentDetailView received document`?
- [ ] `document.analysis` –Ω–µ —Ä–∞–≤–µ–Ω `null`?
- [ ] Network –∑–∞–ø—Ä–æ—Å –∫ `/api/documents/{id}` —É—Å–ø–µ—à–µ–Ω (200)?
- [ ] –û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ `analysis` —Å –¥–∞–Ω–Ω—ã–º–∏?
- [ ] –ü–æ–ª–µ `analysis` —Å–æ–¥–µ—Ä–∂–∏—Ç `risks` –∏ `recommendations`?

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å –í–°–ï —ç—Ç–∏ –ª–æ–≥–∏:**

```
‚úÖ Final analysisResult: {risks: [...], recommendations: [...]}
üîç DocumentDetailView received document: {analysis: {...}}
üîç document.analysis: {risks: [...]}
```

**–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å:**
```
üìÑ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
‚îî‚îÄ [JSON text]

üìä –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –æ—Ç –ì–∞–ª–∏–Ω—ã
‚îú‚îÄ üíº –≠–∫—Å–ø–µ—Ä—Ç–Ω–æ–µ –º–Ω–µ–Ω–∏–µ
‚îú‚îÄ ‚ö†Ô∏è –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
‚îú‚îÄ üö® –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ —Ä–∏—Å–∫–∏
‚îú‚îÄ üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ì–∞–ª–∏–Ω—ã
‚îú‚îÄ üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
‚îî‚îÄ ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
```

---

*–î–∞—Ç–∞: 20 –æ–∫—Ç—è–±—Ä—è 2025*  
*–°—Ç–∞—Ç—É—Å: üîç –í –û–¢–õ–ê–î–ö–ï*
